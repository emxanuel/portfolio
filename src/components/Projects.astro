---
import { getLangFromUrl, useProjectsTranslations } from "../i18n/utils";
import { icons } from '../utils/icons'
import TechIcon from "./TechIcon";
const lang = getLangFromUrl(Astro.url);
const translations = useProjectsTranslations(lang);
const projects = [
    'colegio',
    'soundwave',
    'emmscomputers'
]
---

<section class="mb-8">
    <h2 class="text-2xl font-bold">{translations('projects.title')}</h2>
    <div class="flex flex-col gap-8">
        {projects.map(project => (
            <a href={translations(`projects.${project}.url` as any)} target="_blank">
                <div class="flex flex-col gap-4">
                    <h3 class="text-xl mb-4">{translations(`projects.${project}.title` as any)}</h3>
                    <img class="rounded-lg mb-2" src={translations(`projects.${project}.image` as any)} alt={translations(`projects.${project}.imageAlt` as any)} />
                    <p class="text-pretty mb-6">{translations(`projects.${project}.caption` as any)}</p>
                    <p>{translations('projects.tech')}</p>
                    <div class="flex items-center gap-4">
                        {translations(`projects.${project}.tech` as any).split(', ').map(tech => {
                            return <TechIcon tech={icons[tech.toLowerCase() as keyof typeof icons]?.icon} url={icons[tech.toLowerCase() as keyof typeof icons]?.url}/>
                        })}
                    </div>
                </div>
            </a>
        ))}
    </div>
</section>