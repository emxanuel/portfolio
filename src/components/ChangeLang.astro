---
import { getLangFromUrl, useTranslatedPath } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);

const pathname = Astro.url.pathname;
const basePath = pathname.replace(/^\/(en|es)(?=\/|$)/, "") || "/";

const enHref = translatePath(basePath, "en");
const esHref = translatePath(basePath, "es");
---

<div class="inline-flex rounded-full border border-white/10 bg-white/5 p-0.5 text-xs">
  <a
    href={esHref}
    class:list={[
      "rounded-full px-3 py-1.5 font-medium transition",
      lang === "es" ? "bg-white text-zinc-950" : "text-zinc-200 hover:text-white",
    ]}
    aria-current={lang === "es" ? "page" : undefined}
    >ES</a
  >
  <a
    href={enHref}
    class:list={[
      "rounded-full px-3 py-1.5 font-medium transition",
      lang === "en" ? "bg-white text-zinc-950" : "text-zinc-200 hover:text-white",
    ]}
    aria-current={lang === "en" ? "page" : undefined}
    >EN</a
  >
</div>
